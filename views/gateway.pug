extends layout

block scripts
    script(src='https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js')
    script(src='/javascripts/socketwork.js')

block content
  h1= siteName + ' :: Gateway'
  p Welcome to Xerisure #{siteName} Gateway Page
  p This page shows information about the gateway that controls communications to all of the sensor monitoring nodes.  You might have one or many gateways.  At this time, this is a single gateway that control your local sensor network.

  h2 Serial Port List
  h3 Available serial ports on this gateway
  p= serialPortList
  h3 Port to use:
  p= serialPortToUse
  h3 Port after init:
  pre(class='preserve-whitespace' class='pre-scrollable')
    p= JSON.stringify(port)

  #dialogue
  #angle

  h2 Developer Resources
  ul
    li 
      a(href='https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/Displaying_data/Template_primer') NodeJS Mozilla on Templates (pug)
    li 
      a(href='https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/Displaying_data/Home_page') Node.js Mozilla on putting data into templates and pages
    li
      a(href='http://theholmesoffice.com/getting-ready-for-scalability-creating-an-mvc-framework-for-our-node-js-page/') Holmes Office on basic MVC with Node.js including a static model for simple test data
    li
      a(href='https://www.npmjs.com/package/serialport') Node.js npm serialport package
    li
      a(href='http://helloraspberrypi.blogspot.com/2014/03/nodejssocketioserialport-web-app-to.html') RaspPi Socket.io Node.js etc.
    li
      a(href='http://danialk.github.io/blog/2014/04/26/arduino-and-processingjs-and-socketio-in-action/') Arduino Node.js and Socket.io

  h2 Serial Port Access
  p. 
    You may need to make sure that the user running the Node.js process(es) has permissions to access the serial port.  See e.g. #[a(href='https://help.ubuntu.com/community/SerialConsoleHowto') Ubuntu on Serial Port access] about user and group access checks and updates.  For the Ubuntu 16.nnnnn installation here, during initial development, the following was needed:
  
  pre
    |ls /dev/ttyUSB0 (ok)
    br
    |id -Gn |grep dialout (no output ... need to add user)
    br
    |sudo adduser $USER dialout

  p and then log out and back in again, and now, yes, running the server, no console output indicating failed permissions on the port (check with #[code id -Gn] again


  h2 Rapid Site Update Hints
  p To add a ...
  ol
    li
    li

    

    

